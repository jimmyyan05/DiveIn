<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- 使用正式存在的 Bootstrap 5.3.2 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        /* 自定義分段連接線 */
        .step-connector {
            flex: 1;
            /* 佔滿剩餘空間 */
            height: 5px;
            border-radius: 10px;
            background: #dee2e6;
            margin: 0 10px;
            /* 控制間距 */
            position: relative;
            top: 17.5px;
            /* 對齊徽章中心 */
            background-color: blue;
        }

        /* 步驟徽章統一尺寸 */
        .step-badge {
            width: 40px;
            height: 40px;
        }

        .card-title {
            background-color: #e99191;
        }

        /* 下拉選單樣式 (僅保留 max-height & overflow，可自行調整) */
        .dropdown-menu {
            max-height: 70vh;
            overflow-y: auto;
            border-radius: 8px;
        }

        /* 按鈕狀態控制 */
        .btn-spec {
            border: 1px solid #dee2e6;
            padding: 6px;
            font-size: 13px;
            text-align: left;
            background: white;
        }

        .btn-spec.active {
            border-color: #0d6efd !important;
            background-color: #e7f1ff;
        }
    </style>
    <title>Document</title>
</head>

<body>

    <!-- 步驟條 -->
    <div class="container py-5">
        <div class="d-flex align-items-start justify-content-between">
            <!-- 步驟1 -->
            <div class="text-center position-relative">
                <div
                    class="step-badge bg-primary text-white d-inline-flex rounded-circle align-items-center justify-content-center">
                    1
                </div>
                <div class="mt-2">確認購物車</div>
            </div>

            <!-- 連接線1 -->
            <div class="step-connector"></div>

            <!-- 步驟2 -->
            <div class="text-center position-relative">
                <div
                    class="step-badge bg-secondary text-white rounded-circle d-inline-flex align-items-center justify-content-center">
                    2
                </div>
                <div class="mt-2">付款及運送方式<br>優惠券填寫</div>
            </div>

            <!-- 連接線2 -->
            <div class="step-connector"></div>

            <!-- 步驟3 -->
            <div class="text-center position-relative">
                <div
                    class="step-badge bg-secondary text-white rounded-circle d-inline-flex align-items-center justify-content-center">
                    3
                </div>
                <div class="mt-2">完成訂購</div>
            </div>
        </div>

        <!--------------------------------------------------------->
        <div class="row">
            <div class="col-12">
                <div class="card-title">購物車(1件)</div>
            </div>
        </div>

        <!-- 標題列保持不變 -->
        <div class="row border-bottom py-2 fw-bold align-items-center">
            <div class="col-1">選擇</div>
            <div class="col-5 text-center">商品資料</div>
            <div class="col-2 text-center">單件價格</div>
            <div class="col-2 text-center">數量</div>
            <div class="col-1 text-center">小計</div>
            <div class="col-1 text-center">刪除</div>
        </div>

        <!-- 商品列 -->
        <div class="row border-bottom py-3 align-items-center">
            <div class="col-1">
                <input type="checkbox" class="ms-2" />
            </div>
            <div class="col-5 d-flex align-items-start gap-2 flex-wrap">
                <!-- 商品圖片 -->
                <img src="https://picsum.photos/100/100" class="img-thumbnail" style="width: 80px; height: 80px;" />
                <div class="flex-grow-1">
                    <!-- 商品名稱獨立一行 -->
                    <div class="mb-1">fj4uvu45v4545hvj34jv3j4j45j34vjvv 4v4v4vr3</div>

                    <div class="dropdown">
                        <!-- 觸發按鈕 -->
                        <button class="btn btn-light border dropdown-toggle d-flex align-items-center gap-2"
                            type="button" data-bs-toggle="dropdown" data-bs-display="static" data-bs-auto-close="false"
                            style="padding: 4px 12px; font-size: 14px;">
                            <span>顏色：未選擇</span>
                            <span class="mx-1">|</span>
                            <span>尺寸：未選擇</span>
                        </button>

                        <!-- 下拉選單 -->
                        <div class="dropdown-menu p-3" style="min-width: 320px;">
                            <!-- 顏色區塊 -->
                            <div class="row g-2 mb-3">
                                <div class="col-12 text-muted mb-2">顏色</div>
                                <div class="col-4">
                                    <button class="btn w-100 btn-spec" data-type="color" data-value="黑色">
                                        黑色
                                    </button>
                                </div>
                                <!-- 其他顏色按鈕... -->
                            </div>

                            <!-- 尺寸區塊 -->
                            <div class="row g-2 mb-3">
                                <div class="col-12 text-muted mb-2">尺寸</div>
                                <div class="col-4">
                                    <button class="btn w-100 btn-spec" data-type="size" data-value="36(23)">
                                        36(23)
                                    </button>
                                </div>
                                <!-- 其他尺寸按鈕... -->
                            </div>

                            <!-- 操作按鈕 -->
                            <div class="d-flex gap-2 justify-content-end border-top pt-3">
                                <button class="btn btn-sm btn-outline-secondary">
                                    取消
                                </button>
                                <button class="btn btn-sm btn-primary btn-confirm">確認</button>
                            </div>
                        </div>
                    </div>

                    <!-- 優惠提示文字 -->

                </div>
            </div>

            <!-- 其他欄位保持不變 -->
            <div class="col-2 d-flex align-items-center justify-content-center">
                $1,200
            </div>
            <div class="col-2 d-flex justify-content-center align-items-center gap-1">
                <button class="btn btn-sm btn-outline-secondary" style="width: 30px;">-</button>
                <input type="text" class="form-control form-control-sm text-center" style="width: 45px;" value="1" />
                <button class="btn btn-sm btn-outline-secondary" style="width: 30px;">+</button>
            </div>
            <div class="col-1 d-flex align-items-center justify-content-center">$1,200</div>
            <div class="col-1 d-flex align-items-center justify-content-center">
                <button class="btn text-danger p-0 fs-5">×</button>
            </div>
        </div>
        <div class="row  py-3  ">
            <div class="col-8">
                <div>尚有更多精彩優惠等著你！目前未享用：</div>
                <div class="d-flex gap-2">
                    <div class="text-primary">優惠促銷</div>
                    <div>全館結帳滿3000免運 <span>再買NT$1000</span></div>
                </div>
            </div>
            <div class="col-4 d-flex justify-content-end">
                繼續購物
            </div>
        </div>


        <!--------------------------------------------------------->

        <div class="row">
            <div class="col-12"> <!-- 新增 col 包裹標題 -->
                <div class="card-title h4 mb-4">海編推推好物</div>
            </div>
        </div>
        <div class="row g-3"> <!-- 增加 gutter 間距 -->
            <!-- 重複的卡片結構 -->
            <div class="col-6 col-md-3"> <!-- 響應式設計 -->
                <div class="card h-100 shadow-sm"> <!-- 增加卡片陰影 -->
                    <div class="d-flex p-2">
                        <img src="https://picsum.photos/100/100" class="img-thumbnail flex-shrink-0"
                            style="width: 100px; height: 100px" />
                        <div class="d-flex flex-column ms-2 w-100">
                            <div class="fw-bold">商品名稱</div>
                            <div class="text-danger mt-1">NT$480</div>
                            <div class="mt-auto"> <!-- 固定按鈕在底部 -->
                                <button class="btn btn-sm btn-outline-primary w-100">
                                    加入購物車
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3"> <!-- 響應式設計 -->
                <div class="card h-100 shadow-sm"> <!-- 增加卡片陰影 -->
                    <div class="d-flex p-2">
                        <img src="https://picsum.photos/100/100" class="img-thumbnail flex-shrink-0"
                            style="width: 100px; height: 100px" />
                        <div class="d-flex flex-column ms-2 w-100">
                            <div class="fw-bold">商品名稱</div>
                            <div class="text-danger mt-1">NT$480</div>
                            <div class="mt-auto"> <!-- 固定按鈕在底部 -->
                                <button class="btn btn-sm btn-outline-primary w-100">
                                    加入購物車
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3"> <!-- 響應式設計 -->
                <div class="card h-100 shadow-sm"> <!-- 增加卡片陰影 -->
                    <div class="d-flex p-2">
                        <img src="https://picsum.photos/100/100" class="img-thumbnail flex-shrink-0"
                            style="width: 100px; height: 100px" />
                        <div class="ms-2">
                            <div class="fw-bold">商品名稱</div>
                            <div class="text-danger mt-1">NT$480</div>
                            <div class="mt-auto"> <!-- 固定按鈕在底部 -->
                                <button class="btn btn-sm btn-outline-primary w-100">
                                    加入購物車
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-3"> <!-- 響應式設計 -->
                <div class="card h-100 shadow-sm"> <!-- 增加卡片陰影 -->
                    <div class="d-flex p-2">
                        <img src="https://picsum.photos/100/100" class="img-thumbnail flex-shrink-0"
                            style="width: 100px; height: 100px" />
                        <div class="d-flex flex-column ms-2 w-100">
                            <div class="fw-bold">商品名稱</div>
                            <div class="text-danger mt-1">NT$480</div>
                            <div class="mt-auto"> <!-- 固定按鈕在底部 -->
                                <button class="btn btn-sm btn-outline-primary w-100">
                                    加入購物車
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 其他 3 個重複卡片結構... -->
            <div class="col-12 text-center mt-3">OOOO</div>
        </div>


        <div class="row">
            <div class="col-8">
                <div class="">
                    <div class="bg-primary ">選擇送貨及付款方式</div>
                    <form class="d-flex flex-column gap-2">
                        <label for="">送貨地點</label>
                        <!-- 送貨地點下拉選單 -->
                        <select name="cars" id="cars">
                            <option value="volvo">Volvo</option>
                            <option value="saab">Saab</option>
                            <option value="mercedes">Mercedes</option>
                            <option value="audi">Audi</option>
                        </select>


                        <div class="d-flex flex-column gap-2">
                            <label for="">送貨方式</label>
                            <!-- 送貨地點下拉選單 -->
                            <select name="cars" id="cars">
                                <option value="volvo" selected>郵局配送</option>
                                <option value="saab">Saab</option>
                                <option value="mercedes">Mercedes</option>
                                <option value="audi">Audi</option>
                            </select>

                        </div>
                        <div class="d-flex flex-column gap-2">
                            <label for="">送貨地點</label>
                            <!-- 送貨地點下拉選單 -->
                            <select name="cars" id="cars">
                                <option value="volvo">LinePay</option>
                                <option value="saab">Saab</option>
                                <option value="mercedes">Mercedes</option>
                                <option value="audi">Audi</option>
                            </select>

                        </div>
                    </form>
                </div>
            </div>
            <div class="col-4">
                <div class="bg-primary">訂單資訊</div>
                <div class="d-flex justify-content-between">
                    <div>小記</div>
                    <div>NT$1,200</div>
                </div>
                <!-- 折抵 -->
                <div class="d-flex justify-content-between">
                    <div>折抵購物金</div>
                    <div>-NT100購物金<br>購物金餘額 NT$0</div>
                </div>
                <div class="d-flex flex-column gap-2">
                    <small><a href="">使用優惠代碼</a> </small>
                    <small><a href="">使用推薦代碼</a></small>
                </div>
                <!-- 畫一條線 -->
                <div class="border-bottom border-dark border-2 mt-3"></div>
                <div class="d-flex justify-content-evenly py-3">
                    <div>總計</div>
                    <div>NT$1,200</div>
                </div>
                <button class="btn btn-primary w-100">
                    前往結帳
                </button>

                <div class="d-flex justify-content-between">
                    <div>訂單完成後獲得點數</div>
                    <div>+13點</div>
                </div>
            </div>
        </div>

    </div>



    <script>
        let selectedSpecs = { color: null, size: null };

        // 規格選擇事件
        document.querySelectorAll('.btn-spec').forEach(btn => {
            btn.addEventListener('click', function () {
                const type = this.dataset.type;
                const value = this.dataset.value;

                // 移除同類別選中狀態
                document.querySelectorAll(`[data-type="${type}"]`).forEach(item => {
                    item.classList.remove('active');
                });

                // 更新選擇
                if (selectedSpecs[type] === value) {
                    selectedSpecs[type] = null; // 取消選擇
                } else {
                    selectedSpecs[type] = value;
                    this.classList.add('active');
                }
            });
        });

        // 確認按鈕邏輯
        document.querySelector('.btn-confirm').addEventListener('click', () => {
            const btn = document.querySelector('.dropdown-toggle');
            btn.innerHTML = `
        <span>顏色：${selectedSpecs.color || '未選擇'}</span>
        <span class="mx-1">|</span>
        <span>尺寸：${selectedSpecs.size || '未選擇'}</span>
      `;
            btn.parentElement.querySelector('.dropdown-menu').classList.remove('show');
        });

        // 取消按鈕邏輯
        document.querySelector('.btn-close').addEventListener('click', () => {
            document.querySelector('.dropdown-menu').classList.remove('show');
        });
    </script>

    <!-- 正確版本的 Bootstrap Bundle JS (含 Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>